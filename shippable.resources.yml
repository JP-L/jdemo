# Pipeline Resources
resources:
    # The version of the release
    - name: jdemo-release
      type: version
      seed:
        versionName: "0.0.1"
        
    # Git repository
    - name: jdemo-scm
      type: gitRepo
      integration: GitHub
      pointer:
        sourceName:  "jp-l/java-gradle-demo"
        branch: master
      
    # Image
    - name: jdemo
      type: image
      integration: Artifactory-CR
      pointer:
        sourceName: ""
      seed:
        versionName: ""
        
    # Docker options
    - name: demo-dockerOptions
      type: dockerOptions
      version:
        memory: 1024                        #in MiB
        cpuShares: 10
        portMappings:
            - "8080:8080"
        #links:                                    #containerName:alias
        #   - <container name>:<alias>
        #   - <container name>:<alias>
        #volumes:
        #  - "<source>:<container path>:<options>"
        #  - "<source>:<container path>:<options>
        logConfig:
            type: awslogs
            options:
              awslogs-group: Demo-Application
              awslogs-region: eu-west-1
        #entryPoint:
        #  - <string>
        #  - <string>
        #cmd:
        #  - <string>
        #  - <string>
        #workingDir: <path to working dir>
        privileged: false                     # May be true or false
        #labels:
        #  <key1>: <value1>
        #  <key2>: <value2>
        #volumesFrom:
        #  - "<container name>:<options>"
        #  - "<container name>:<options>"
        #ulimits:
        #  - name: <name of limit>                 # e.g. cpu
        #    soft: <number>                        # soft Limit
        #    hard: <number>                        # hard Limit
        #  - name: <name of limit>                 # e.g. nofile
        #    soft: <number>                        # soft Limit, e.g. 50
        #    hard: <number>                        # hard Limit, e.g. 100
        #dnsServers:
        #  - "<ip address>"
        #dnsSearch:
        #  - "<ip address>"
        #user: <string>                            # For GKE, this should be the UID (a number)

    # Integrations
    #- name: AWS
    #  type: integration
    #  integration: Provider-AWS
      
    # Cluster
    - name: demo-cluster
      type: cluster
      integration: Provider-AWS
      pointer:
        sourceName : "demo-environment"
        region: "eu-west-1"
        
    # Elastic Loadbalancers
    - name: ELB-DemoApp
      type: loadBalancer
      pointer:
        sourceName: ""
        method: application
        
    # Number of replicas
    - name: demo-replicas
      type: replicas
      version:
        count: 1

    # Sync repo's
    #- name: <string>                              #required
    #  type: syncRepo                              #required
    #  integration: <string>                       #required, source control integration
    #  pointer:
    #    sourceName: org/repo                  #required
    #    branch: <string>                          #optional, default master
    
# 
#notification:
    - name: Slack
      type: notification
      integration: Slack
      pointer:
        recipients:
            - "#shippable"
